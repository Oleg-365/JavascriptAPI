<!DOCTYPE html>
<html>
<head>
	<title>Task 1</title>
</head>
<body>

	<select id="category-list"> 
		<!-- Значение name отсутствует потому что у нас нет формы и ничего не будем отправлять (оно нужно для удобства обращения к форме) -->
		<option value="all" selected>Все товары</option>
		<option value="Электроника">Электроника</option>
		<option value="Бытовая техника">Бытовая техника</option>
		<option value="Книги">Книги</option>
		<option value="Одежда">Одежда</option>
		<option value="Мебель">Мебель</option>
	</select>

	<div class="products">
		
	</div>

	<script>
		// Задание 1
		// Дан Массив товаров

		const productsData = [
		{
			id: 1,
			name: "Ноутбук",
			category: "Электроника"
		},
		{
			id: 2,
			name: "Смартфон",
			category: "Электроника"
		},
		{
			id: 3,
			name: "Кофемашина",
			category: "Бытовая техника"
		},
		{
			id: 4,
			name: "Фотокамера",
			category: "Электроника"
		},
		{
			id: 5,
			name: "Микроволновая печь",
			category: "Бытовая техника"
		},
		{
			id: 6,
			name: "Кника",
			category: "Книги"
		},
		{
			id: 7,
			name: "Футболка",
			category: "Одежда"
		},
		{
			id: 9,
			name: "Стул",
			category: "Мебель"
		},
		{
			id: 10,
			name: "Стол",
			category: "Мебель"
		}
		];

		const productsEl = document.querySelector('.products');

		const productHtml = createProductsHtml(productsData);
		
		productsEl.innerHTML = productHtml;

		function createProductsHtml(products) {
			return products.map((product) => 

			`<div data-id=${product.id} class="product"> 
				<h3>${product.name}</h3>
				<p>${product.category}</p>
				<button class="add-button">Купить</button>
			</div>
			`).join("");
		}

		const selectEl = document.querySelector('#category-list');

		selectEl.addEventListener('change', () => {
			const selectedCategory = selectEl.value;
			const products = getProductsByCategory(selectedCategory);
			const productHtml = createProductsHtml(products);
			productsEl.innerHTML = productHtml;
		})

		function getProductsByCategory(category) {
			if(category === "all") {
				return productsData;
			}
			return productsData.filter((product) => product.category === category);
		}

		// productsEl.addEventListener('click', ({target}) => {
		// 	if(!target.closest(".add-button")) {
		// 		return;
		// 	}
		// })
	</script>
</body>
</html>